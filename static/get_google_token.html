<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Drive Token è·å–å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            width: 100%;
            padding: 40px;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .step {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
        }

        .step h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .step p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            color: #333;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }

        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .result {
            background: #f0f7ff;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .result h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .token-box {
            background: white;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            word-break: break-all;
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 10px;
        }

        .copy-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            margin-top: 10px;
        }

        .copy-btn:hover {
            background: #218838;
        }

        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-top: 20px;
            border-radius: 8px;
        }

        .warning p {
            color: #856404;
            font-size: 13px;
            line-height: 1.6;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ” Google Drive Token è·å–å·¥å…·</h1>
        <p class="subtitle">æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è·å–Google Drive APIçš„Refresh Token</p>

        <div class="step">
            <h3>æ­¥éª¤ 1: è·å–Client IDå’ŒSecret</h3>
            <p>1. è®¿é—® <a href="https://console.cloud.google.com/" target="_blank">Google Cloud Console</a></p>
            <p>2. åˆ›å»ºé¡¹ç›®å¹¶å¯ç”¨ Google Drive API</p>
            <p>3. åˆ›å»º OAuth 2.0 å®¢æˆ·ç«¯IDï¼ˆç±»å‹ï¼šæ¡Œé¢åº”ç”¨ï¼‰</p>
            <p>4. ä¸‹è½½å‡­æ®æˆ–å¤åˆ¶ Client ID å’Œ Client Secret</p>
        </div>

        <div class="input-group">
            <label for="clientId">Client ID</label>
            <input type="text" id="clientId" placeholder="xxx.apps.googleusercontent.com">
        </div>

        <div class="input-group">
            <label for="clientSecret">Client Secret</label>
            <input type="text" id="clientSecret" placeholder="GOCSPX-xxx">
        </div>

        <button class="btn" onclick="startAuth()">å¼€å§‹æˆæƒ</button>

        <div class="step" style="margin-top: 30px;">
            <h3>æ­¥éª¤ 2: ä½¿ç”¨OAuth Playground</h3>
            <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®åï¼Œä¼šæ‰“å¼€Google OAuth 2.0 Playground</p>
            <p>æŒ‰ç…§é¡µé¢æŒ‡å¼•å®Œæˆæˆæƒï¼Œç„¶åå¤åˆ¶ <code>refresh_token</code></p>
        </div>

        <div class="input-group" style="margin-top: 20px;">
            <label for="refreshToken">Refresh Tokenï¼ˆä»Playgroundå¤åˆ¶ï¼‰</label>
            <input type="text" id="refreshToken" placeholder="1//xxx...">
        </div>

        <button class="btn" onclick="showResult()" style="background: #28a745;">ç”Ÿæˆé…ç½®</button>

        <div class="result" id="result">
            <h3>âœ… é…ç½®ä¿¡æ¯</h3>
            <p>å°†ä»¥ä¸‹ä¿¡æ¯æ·»åŠ åˆ°Hugging Face Spacesçš„ç¯å¢ƒå˜é‡ï¼š</p>
            <div class="token-box" id="configOutput"></div>
            <button class="copy-btn" onclick="copyConfig()">ğŸ“‹ å¤åˆ¶é…ç½®</button>
        </div>

        <div class="warning">
            <p><strong>âš ï¸ å®‰å…¨æç¤ºï¼š</strong></p>
            <p>â€¢ ä¸è¦å°†è¿™äº›å‡­æ®åˆ†äº«ç»™ä»–äºº</p>
            <p>â€¢ ä¸è¦æäº¤åˆ°å…¬å¼€çš„Gitä»“åº“</p>
            <p>â€¢ åªåœ¨Hugging Face Spacesçš„ç§å¯†ç¯å¢ƒå˜é‡ä¸­ä½¿ç”¨</p>
        </div>
    </div>

    <script>
        function startAuth() {
            const clientId = document.getElementById('clientId').value.trim();
            const clientSecret = document.getElementById('clientSecret').value.trim();

            if (!clientId || !clientSecret) {
                alert('è¯·å…ˆå¡«å†™Client IDå’ŒClient Secret');
                return;
            }

            // ä¿å­˜åˆ°localStorage
            localStorage.setItem('gdrive_client_id', clientId);
            localStorage.setItem('gdrive_client_secret', clientSecret);

            // æ‰“å¼€OAuth Playground
            const playgroundUrl = 'https://developers.google.com/oauthplayground/';
            window.open(playgroundUrl, '_blank');

            alert('å·²æ‰“å¼€OAuth Playground\n\nè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š\n\n1. ç‚¹å‡»å³ä¸Šè§’é½¿è½®âš™ï¸\n2. å‹¾é€‰"Use your own OAuth credentials"\n3. è¾“å…¥ä½ çš„Client IDå’ŒSecret\n4. åœ¨å·¦ä¾§é€‰æ‹©"Drive API v3"\n5. å‹¾é€‰ https://www.googleapis.com/auth/drive.file\n6. ç‚¹å‡»"Authorize APIs"\n7. å®Œæˆæˆæƒåï¼Œç‚¹å‡»"Exchange authorization code for tokens"\n8. å¤åˆ¶refresh_tokençš„å€¼ï¼Œç²˜è´´åˆ°ä¸‹æ–¹è¾“å…¥æ¡†');
        }

        function showResult() {
            const clientId = document.getElementById('clientId').value.trim();
            const clientSecret = document.getElementById('clientSecret').value.trim();
            const refreshToken = document.getElementById('refreshToken').value.trim();

            if (!clientId || !clientSecret || !refreshToken) {
                alert('è¯·å¡«å†™æ‰€æœ‰å­—æ®µ');
                return;
            }

            const config = `GOOGLE_DRIVE_CLIENT_ID=${clientId}
GOOGLE_DRIVE_CLIENT_SECRET=${clientSecret}
GOOGLE_DRIVE_REFRESH_TOKEN=${refreshToken}`;

            document.getElementById('configOutput').textContent = config;
            document.getElementById('result').style.display = 'block';

            // æ»šåŠ¨åˆ°ç»“æœ
            document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
        }

        function copyConfig() {
            const config = document.getElementById('configOutput').textContent;
            navigator.clipboard.writeText(config).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'âœ… å·²å¤åˆ¶ï¼';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            });
        }

        // é¡µé¢åŠ è½½æ—¶æ¢å¤ä¿å­˜çš„å€¼
        window.onload = function () {
            const savedClientId = localStorage.getItem('gdrive_client_id');
            const savedClientSecret = localStorage.getItem('gdrive_client_secret');

            if (savedClientId) document.getElementById('clientId').value = savedClientId;
            if (savedClientSecret) document.getElementById('clientSecret').value = savedClientSecret;
        };
    </script>
</body>

</html>